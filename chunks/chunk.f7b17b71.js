const a=document.querySelector("article"),o=Array.from(a.querySelectorAll("h2, h3, h4")),r=Array.from(document.querySelectorAll("a[data-heading-id]"));function d(e){return e.rootBounds.bottom-e.boundingClientRect.bottom>e.rootBounds.bottom/2}function i(e){!e||(r.forEach(t=>t.classList.remove("active")),r.find(t=>t.dataset.headingId===e).classList.add("active"))}const l=e=>{e.map(t=>{if(t.time<500)return;if(!d(t)&&!t.isIntersecting){const n=o.findIndex(c=>c===t.target);if(n===0)return;i(o[n-1].id)}else t.isIntersecting&&i(t.target.id)})},u={root:null,rootMargin:"-100px 0px -60% 0px",threshold:[1]},s=new IntersectionObserver(l,u);o.forEach(e=>s.observe(e));window.addEventListener("beforeunload",()=>s.disconnect());
